# RDB

- RDB 는 내포 관계를 허용하지 않는다.
  - 큰 테이블에 여러가지를 넣을 수는 있다. 그런데 이거... 한계가 명확하다.
    글 제목, 글 내용, 글 저자 이름, 글 저자 소개....
    - 이런 식으로 한없이 길어지면 관리가 힘들 것이다.
  - **주제에 따라서 테이블을 쪼개는 것이 좋다.**
    글 // 아이디, 제목, 내용
    저자 // 아이디, 이름, 소개
    댓글 // 아이디, 제목, 내용, 작성일, 저자 아이디
    - 이런 방식으로 나눠서 갈 수 있도록 해볼까?
      주제에 따라서 데이터를 그룹핑할 수 있다.
    - **join?**
      그룹핑 된 것을 언제든지 필요할 때마다 순간순간 합성해서 사용할 수 있다.



# ERD 의 구성요소

- Entity, Table
  - 테이블로 전환되는 것?
  - 글, 저자, 댓글 등을 말하는 것
  - 하나의 정보가 아니라 여러가지 정보를 포함해야 한다면 Entity 라고 봐야한다.
- Attribute, column
  - 세부 데이터를 말한다.

- Relation -> PK, FK
- Tuple -> Row



## Cardinality

- 기수
- 형태
  - `1 : 1`, `1 : N`, `M : N` ...
- 예시 (1:1)
  - 담임
    - kim, lee, park
  - 반
    - 1반, 2반, 3반
  - 담임은 반을 몇개를 가질 수 있는가
    1. 담임에게 반은 1개이다.
  - 반은 담임을 몇개를 가질 수 있는가
    1. 반에게 담임은 하나이다.
  - 해석
    - 1 : 1 이다.
- 예시 (일 대 다)
  - 저자
    - kim, lee, park
  - 댓글
    - 댓글1, 댓글2, 댓글3
  - 저자에게 댓글은 몇개를 가질 수 있는가
    2. 저자는 여러 개의 댓글을 작성한다.
  - 댓글에게 저자는 몇 개를 가질 수 있는가
    2. 각 댓글에게 저자는 하나만 존재한다.
  - 해석
    - 1 : N 이다. 일 대 다 이다.



## Optionality

- 무조건 있어야 하는가??
- 예시
  - 저자는 댓글을 작성하지 않을수도 있다.
    - 저자에게 댓글은 옵션이다.
    - 하지만 댓글에게는 반드시 저자가 존재해야한다.
      - Mandantory : 필수적으로 존재해야 한다.





# Relation



## 1:N 관계의 설정

- 설명
  - 저자는 댓글을 가질 수도 있고 가지지 않을 수도 있다.
  - 저자 한명은 댓글을 여러개 가질 수 있다.
  - 댓글은 글과 연관이 있다.



comment

| id   | description | topic_id | author_id | created |
| ---- | ----------- | -------- | --------- | ------- |
| 1    | abcd        | 1        | 1         |         |
| 2    | aaaa        | 1        | 1         |         |
| ...  |             |          |           |         |

- `topic_ic` 와 `author_id`를 추가해줘야한다.
- 나머지의 관계는 Optionality 에 따라서 달라진다.



## M:N 관계의 설정

- 설명
  - 한 명의 저자가 여러 개의 글을 작성할 수 있다.
  - 하나의 글을 여러 명의 저자가 작성할 수 있다.
- 예시
  - kim 은 helloSQL, helloJPA, helloSpring 라는 글을 작성했다.
  - lee 는 helloSQL, helloJPA 라는 글을 작성했다.
  - 우리는 이것을 어떻게 처리할까??

- 테이블

  - author 와 topic 의 테이블에다가 넣어두기에는 뭔가 애매하다

    - topic 을 작성한 사람이 2명이면?
    - 여러 개의 topic 을 작성한 사람이면?
    - **우리는 중재할 무엇인가가 필요하다.**

  - mapping 테이블

    | id   | author_id | topic_id | create |
    | ---- | --------- | -------- | ------ |
    | 1    | 1         | 1        | ...    |
    | 2    | 1         | 2        | ...    |
    | 3    | 1         | 3        | ...    |
    | 4    | 2         | 1        | ...    |
    | 5    | 2         | 3        | ...    |

  







# By Egoing